(this.webpackJsonpkanban=this.webpackJsonpkanban||[]).push([[6],{11:function(e,t,a){"use strict";var n=a(120),c=a(203),r=a.n(c),l=a(204),o=a.n(l),i="",s=2e4,u=r.a.create({baseURL:i,timeout:s});u.defaults.headers.common["Content-Type"]="application/json",u.defaults.withCredentials=!0,u.interceptors.request.use((function(e){return"post"!==e.method&&"put"!==e.method&&"patch"!==e.method||!e.data instanceof String&&(e.data=o.a.stringify(e.data)),e}),(function(e){return Promise.reject(e)})),u.interceptors.response.use((function(e){if("delete"===e.config.method)return Promise.resolve(e);var t=e.data;return Promise.resolve(t)}),(function(e){if(/timeout/.test(e.message)&&console.log("\u7f51\u7edc\u8d85\u65f6\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01"),e.response)switch(e.response.status){case 401:var t="/user/login?next="+window.location.href,a=window.location.origin+t;window.location.href=a;break;case 403:case 404:break;case 500:console.log("\u670d\u52a1\u5668\u9519\u8bef\uff01");break;case 503:console.log("\u670d\u52a1\u5668\u54cd\u5e94\u4e0d\u8fc7\u6765\uff01");break;default:console.log("\u9ed8\u8ba4\u9519\u8bef\u63d0\u793a")}return Promise.reject(e.response)}));var m=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u.post(e,t,a)};t.a={Get:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u.get(e,Object(n.a)({},a,{params:t}))},Post:m,Put:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u.put(e,t,a)},Patch:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u.patch(e,t,a)},Delete:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u.delete(e,Object(n.a)({},a,{params:t}))},testFetch:function(){m("/api/v1/account/login",{},{data:{username:"admin",password:"abc123456"},headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}}},151:function(e,t,a){"use strict";a.d(t,"b",(function(){return c}));var n=a(92);function c(e,t){var a=new URLSearchParams(t),n={};return e.forEach((function(e){n[e]=a.get(e)})),n}var r=function e(t){var a=this;Object(n.a)(this,e),this.get=function(e){return a.params[e]},this.set=function(e,t){a.params[e]=t},this.parse=function(e){return"string"!==typeof e?{}:("?"===e[0]&&(e=e.slice(1)),decodeURI(e).split("&").map((function(e){var t=e.split("="),a=t[0],n=t[1]||!0;return"string"===typeof n&&!1===isNaN(Number(n))&&(n=Number(n)),{key:a,value:n}})).reduce((function(e,t){var a=t.key,n=t.value;return"undefined"===typeof e[a]?e[a]=n:(e[a]=Array.isArray(e[a])?e[a]:[e[a]],e[a].push(n)),e}),{}))},this.url=t,this.params=this.parse(t)};window.URLSearchParams,t.a=r},16:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return l}));var n=a(0),c=a.n(n),r=c.a.createContext({}),l=c.a.createContext({});c.a.createRef({});t.c=l},199:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));a(54);var n=a(10),c=(a(84),a(29)),r=(a(87),a(17)),l=a(3),o=a(0),i=a.n(o),s=a(11),u=function(e){var t=e.groups,a=e.handleGroupClick,n=Object(o.useState)({}),s=Object(l.a)(n,2),u=s[0],m=s[1],d=Object(o.useCallback)((function(e,t){e.stopPropagation(),a(t)}),[a]);Object(o.useEffect)((function(){t.length>0?m(t[0]):m({})}),[t]);var f=Object(o.useCallback)((function(e){return i.a.createElement("li",{className:u.id===e.id?"item active":"item",key:e.id,onMouseEnter:function(){m(e)},onClick:function(t){return d(t,e)}},e.name)}),[u,d]),p=Object(o.useMemo)((function(){return t.map((function(e,t){return f(e)}))}),[f,t]),g=Object(o.useCallback)((function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.children&&e.children.length>0&&(t=e.children.map((function(e,t){return g(e,a+1)}))),t?i.a.createElement(r.a,{className:"item",key:e.id,xs:{span:8},lg:{span:6}},i.a.createElement("div",{className:"title",onClick:function(t){return d(t,e)}},e.name),i.a.createElement("div",{className:"children"},t)):a>1?i.a.createElement("div",{className:"item",key:e.id},i.a.createElement("div",{className:"title",style:{paddingLeft:5*a},onClick:function(t){return d(t,e)}},e.name)):i.a.createElement(r.a,{className:"item",key:e.id,xs:{span:8}},i.a.createElement("div",{className:"title",style:{paddingLeft:5*a},onClick:function(t){return d(t,e)}},e.name))}),[d]),E=Object(o.useMemo)((function(){return u&&u.id>0?u.children&&u.children.length>0?i.a.createElement("div",{className:"current"},i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"title"},u.name)),i.a.createElement("div",{className:"content"},i.a.createElement(c.a,{gutter:24},u.children.map((function(e,t){return g(e,1)}))))):null:i.a.createElement("span",null)}),[u,g]);return i.a.createElement("div",{className:"groups-nav"},i.a.createElement("div",{className:"groups"},i.a.createElement("ul",null,p)),E)},m=function(e){var t=Object(o.useState)([]),a=Object(l.a)(t,2),c=a[0],r=a[1],m=Object(o.useCallback)((function(){s.a.Get("/api/v1/docs/group/all").then((function(e){Array.isArray(e)?r(e):n.a.warn("\u83b7\u53d6\u5206\u7ec4\u5217\u8868\u6570\u636e\u51fa\u9519",3)})).catch((function(e){console.log(e)}))}),[r]);return Object(o.useEffect)((function(){0===c.length&&m()}),[c.length,m]),i.a.createElement(u,{groups:c,handleGroupClick:function(e){console.log(e)}})};t.b=u},241:function(e,t,a){e.exports=a(410)},4:function(e,t,a){"use strict";var n=a(92),c=a(156),r=a(160),l=a(157),o=a(161),i=a(0),s=a.n(i);s.a.Component;t.a=function(e){var t=e.type,a=e.spin,n=e.danger,c=e.className,r=e.children,l=Object(i.useMemo)((function(){var e="fa fa-".concat(t);return a&&(e+=" fa-spin"),n&&(e+=" danger"),e}),[n,a,t]);return s.a.createElement("span",{className:c,style:{display:"inline-block",padding:"0 3px"}},s.a.createElement("i",{className:l},r))}},408:function(e,t,a){},409:function(e,t,a){},410:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(6),l=a.n(r),o=a(5),i=a(44),s=a(16),u=(a(78),a(20)),m=a(3),d=a(94),f=a(4),p=(a(229),a(205)),g=a(11),E=function e(t){var a,r,l,i=t.item,s=t.index,u=t.collapsed,d=t.defaultOpenKey,g=Object(n.useState)(!1),E=Object(m.a)(g,2),h=E[0],b=E[1],v=i.children.map((function(t,a){return c.a.createElement(e,{item:t,index:a,key:a,collapsed:u})})),O=Object(n.useCallback)((function(e){b((function(e){return!e}))}),[]);return Object(n.useEffect)((function(){u||(d===i.key?b(!0):b(!1))}),[u,d,i.key]),i.icon&&(a=c.a.createElement(f.a,{type:i.icon})),v.length>0&&(r=c.a.createElement("div",{className:"right"},c.a.createElement(f.a,{type:h?"caret-down":"caret-left"}))),u?v.length>0?c.a.createElement(p.a,{title:i.title,content:c.a.createElement("div",{className:"collapsed-nav-children"},v),placement:"rightTop"},c.a.createElement("div",{className:"item"},c.a.createElement("div",{className:"title"},c.a.createElement(f.a,{type:i.icon?i.icon:"angle-right"}),i.level<=1?null:i.title))):i.is_link&&i.link?c.a.createElement("div",{className:"item"},c.a.createElement("a",{href:i.link,target:"_blank"===i.target?"_blank":"",rel:"noopener noreferrer"},c.a.createElement("div",{className:"title"},c.a.createElement(f.a,{type:i.icon?i.icon:"angle-right"}),i.title?i.title:"\u65e0\u6807\u9898"))):c.a.createElement("div",{className:"item"},c.a.createElement(o.c,{to:i.slug,activeClassName:"active",target:"_blank"===i.target?"_blank":""},c.a.createElement("div",{className:"title"},c.a.createElement(f.a,{type:i.icon?i.icon:"angle-right"}),i.title?i.title:"\u65e0\u6807\u9898"))):(l=v.length>0?c.a.createElement("div",null,c.a.createElement("div",{className:"title",style:{paddingLeft:12*i.level},onClick:O},a,i.title?i.title:"\u65e0\u6807\u9898",r)):i.is_link&&i.link?c.a.createElement("a",{href:i.link,target:i.target,rel:"noopener noreferrer"},c.a.createElement("div",{className:"title",style:{paddingLeft:12*i.level}},a,i.title?i.title:"\u65e0\u6807\u9898",r)):c.a.createElement(o.c,{to:i.slug,activeClassName:"active",target:"_blank"===i.target?"_blank":""},c.a.createElement("div",{className:"title",style:{paddingLeft:12*i.level},onClick:O},a,i.title?i.title:"\u65e0\u6807\u9898",r)),c.a.createElement("div",{className:"item",key:s},l,u?"\u6298\u53e0":"",v.length>0&&c.a.createElement("div",{className:h?"children active":"children"},v)))},h=function(e){var t=Object(n.useState)(null),a=Object(m.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(!1),i=Object(m.a)(o,2),s=i[0],u=i[1],d=Object(n.useCallback)((function(){g.a.Get("/api/v1/account/user/nav/list").then((function(e){e instanceof Array?l(e):console.log("\u83b7\u53d6\u5bfc\u822a\u6570\u636e\u51fa\u9519")})).catch((function(e){console.log(e)}))}),[]);Object(n.useEffect)((function(){d()}),[d]),Object(n.useEffect)((function(){e.collapsed!==s&&u(e.collapsed)}),[s,e.collapsed]);var f=Object(n.useMemo)((function(){return r&&r.length>0?r.map((function(t,a){return c.a.createElement(E,{item:t,index:a,key:a,collapsed:s,defaultOpenKey:e.defaultOpenKey})})):null}),[s,r,e.defaultOpenKey]);return c.a.createElement("div",{className:"nav-list"},f)};var b=function(e){var t=e.showLeftSider,a=e.setShowLeftSider,r=e.defaultOpenKey,l=Object(n.useState)(null),i=Object(m.a)(l,2),s=i[0],p=i[1],g=Object(n.useMemo)((function(){var e=localStorage.getItem("leftSiderWidth"),t=parseInt(e);return t&&t>=156&&t<=460?t:200}),[]),E=Object(n.useState)(g),b=Object(m.a)(E,2),v=b[0],O=b[1];Object(n.useEffect)((function(){return function(){localStorage.setItem("leftSiderWidth",v)}}),[v]);var j=Object(n.useCallback)((function(e,t){t.element;var a=t.size;a.width<156?O(156):a.width<=460?O(a.width):O(460)}),[O]),y=Object(n.useCallback)((function(e){e.preventDefault(),a((function(e){return localStorage.setItem("showLeftSider",!e),!e}))}),[a]),N=Object(n.useMemo)((function(){return t?c.a.createElement(h,{collapsed:s,defaultOpenKey:r}):null}),[t,s,r]),w=Object(n.useCallback)((function(){p((function(e){return!e}))}),[p]);return Object(n.useEffect)((function(){if(null===s){var e=localStorage.getItem("leftSiderNavCollapsed");p(null!==e&&"true"===e)}return localStorage.setItem("leftSiderNavCollapsed",s),function(){localStorage.setItem("leftSiderNavCollapsed",s)}}),[s]),c.a.createElement(d.Resizable,{className:"box",axis:"x",height:0,width:v,onResize:j},c.a.createElement(u.a.Sider,{style:{height:"100vh"},width:s?64:v},c.a.createElement("div",{className:s?"left-sider collapsed":"left-sider"},c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"logo"},c.a.createElement(o.b,{to:"/"},c.a.createElement("img",{alt:"logo",src:"/static/image/logo-kanban.svg"})),c.a.createElement("div",{className:"toogle",onClick:y,style:{display:s?"none":""}},c.a.createElement(f.a,{type:"angle-double-left",noMarginRight:!0})),c.a.createElement("div",{className:"clear"})),c.a.createElement("div",{className:"clear"})),c.a.createElement("div",{className:"content"},N),c.a.createElement("div",{className:"footer",onClick:w},c.a.createElement("div",{className:"collapsed-toogle"},c.a.createElement(f.a,{type:s?"indent":"outdent"}))))))},v=a(27),O=(a(327),a(112));var j=function(e){var t=e.data;if(t&&t instanceof Array){var a=t.map((function(e,t){var a;return e.icon&&(a=c.a.createElement(f.a,{type:e.icon,noMarginRight:!0})),e.link?c.a.createElement(O.a.Item,{key:t},c.a.createElement(o.b,{to:e.link},a,e.title?e.title:c.a.createElement("span",{className:"no-title"},"\u65e0\u6807\u9898"))):c.a.createElement(O.a.Item,{key:t},a,e.title?e.title:c.a.createElement("span",{className:"no-title"},"\u65e0\u6807\u9898"))}));return c.a.createElement(O.a,{className:"nav"},a)}return null},y=(a(86),a(15)),N=function(e){var t=e.history,a=Object(n.useState)(!1),r=Object(m.a)(a,2),l=r[0],o=r[1],i=Object(n.useState)(""),s=Object(m.a)(i,2),u=s[0],d=s[1],p=Object(n.useCallback)((function(e){d(e.target.value)}),[]),g=Object(n.useCallback)((function(e){var a="/tools/search?search=".concat(e);t.push(a)}),[t]);return l?c.a.createElement("div",{className:"search",onMouseLeave:function(){o(!1)}},c.a.createElement(y.a.Search,{value:u,allowClear:!0,onChange:p,onSearch:g})):c.a.createElement("div",{className:"search",onMouseEnter:function(){o(!0)}},c.a.createElement(f.a,{type:"search"}))},w=(a(118),a(90)),k=(a(169),a(31)),S=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)({}),s=Object(m.a)(i,2),u=s[0],d=s[1],p=Object(n.useState)(!1),E=Object(m.a)(p,2),h=E[0],b=E[1],v=Object(n.useCallback)((function(){g.a.Get("/api/v1/account/login").then((function(e){b(!0),e.logined?(l(!0),d({username:e.username})):(l(!1),d({username:"\u672a\u767b\u5f55"}))})).catch((function(e){console.log(e),b(!0)}))}),[l,d]);if(Object(n.useEffect)((function(){v()}),[v]),h){if(r){var O=c.a.createElement(k.a,null,c.a.createElement(k.a.Item,null,c.a.createElement(o.b,{to:"/user/center"},c.a.createElement(f.a,{type:"user-circle"}," \u7528\u6237\u4e2d\u5fc3"))),c.a.createElement(k.a.Item,null,c.a.createElement(o.b,{to:"/docs/group"},c.a.createElement(f.a,{type:"folder"}," \u6587\u6863\u5206\u7ec4"))),c.a.createElement(k.a.Item,null,c.a.createElement(o.b,{to:"/docs/article/list"},c.a.createElement(f.a,{type:"file-text-o"}," \u6587\u7ae0\u5217\u8868"))),c.a.createElement(k.a.Item,null,c.a.createElement(o.b,{to:"/docs/image"},c.a.createElement(f.a,{type:"image"}," \u56fe\u7247\u5217\u8868"))),c.a.createElement(k.a.Item,null,c.a.createElement(o.b,{to:"/user/message"},c.a.createElement(f.a,{type:"envelope-o"}," \u6d88\u606f\u4e2d\u5fc3"))),c.a.createElement(k.a.Item,null,c.a.createElement(o.b,{to:"/user/logout"},c.a.createElement(f.a,{type:"sign-out"}," \u9000\u51fa\u767b\u5f55"))));return c.a.createElement(w.a,{overlay:O},c.a.createElement("div",null,c.a.createElement(f.a,{type:"user-o"}),"Hi ~ ",u.username))}return c.a.createElement(o.b,{to:"/user/login"},c.a.createElement(f.a,{type:"sign-in"}),"\u767b\u5f55")}return null},C=Object(v.a)((function(){return a.e(5).then(a.bind(null,1277))})),x=Object(v.a)((function(){return Promise.all([a.e(0),a.e(1),a.e(3),a.e(2),a.e(12)]).then(a.bind(null,1280))})),I=Object(v.a)((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(4),a.e(14)]).then(a.bind(null,1283))})),L=Object(v.a)((function(){return Promise.all([a.e(0),a.e(1),a.e(3),a.e(4),a.e(17)]).then(a.bind(null,1284))})),P=Object(v.a)((function(){return Promise.all([a.e(0),a.e(1),a.e(3),a.e(2),a.e(13)]).then(a.bind(null,1279))})),A=Object(v.a)((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(4),a.e(15)]).then(a.bind(null,1285))})),M=Object(v.a)((function(){return Promise.all([a.e(0),a.e(1),a.e(3),a.e(2),a.e(8)]).then(a.bind(null,1282))}));var T=function(e){var t=Object(n.useState)("align-justify"),a=Object(m.a)(t,2),r=a[0],l=a[1],o=Object(n.useContext)(s.a).navData,u=Object(n.useCallback)((function(t){t.preventDefault(),e.setShowLeftSider((function(e){return localStorage.setItem("showLeftSider",!e),!e}))}),[e]);return c.a.createElement("div",{className:"right-content"},c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"toogle",onClick:u,onMouseEnter:function(e){l("angle-double-right")},onMouseLeave:function(e){l("align-justify")},style:{display:e.showLeftSider?"none":"inline-block"}},c.a.createElement(f.a,{type:r})),c.a.createElement(j,{data:o}),c.a.createElement("div",{className:"right"},c.a.createElement(N,{history:e.history}),c.a.createElement("div",{className:"user"},c.a.createElement(S,null)))),c.a.createElement("div",{className:"container"},c.a.createElement(i.d,null,c.a.createElement(i.b,{path:"/docs/",component:x,location:e.location}),c.a.createElement(i.b,{path:"/tags/",component:I,location:e.location}),c.a.createElement(i.b,{path:"/tools/",component:L,location:e.location}),c.a.createElement(i.b,{path:"/user",component:P,location:e.location}),c.a.createElement(i.b,{path:"/config",component:A,location:e.location}),c.a.createElement(i.b,{path:"/test",component:M,location:e.location}))),c.a.createElement(C,null))};var R=function(e){var t,a=Object(n.useState)(!1),r=Object(m.a)(a,2),l=r[0],o=r[1],i=Object(n.useState)(0),d=Object(m.a)(i,2),f=d[0],p=d[1],g=Object(n.useState)([{title:"\u9996\u9875",icon:"home",link:"/"}]),E=Object(m.a)(g,2),h=E[0],v=E[1];return Object(n.useEffect)((function(){var t=localStorage.getItem("showLeftSider");null!==t?(t!==l.toString()&&o("true"===t),"/"===e.location.pathname&&(document.title="\u770b\u677f-\u9996\u9875",h.length>1&&v([{title:"\u9996\u9875",icon:"home",link:"/"}]))):o(!0)}),[h.length,e.location.pathname,l]),l&&(t=c.a.createElement(b,{showLeftSider:l,setShowLeftSider:o,refreshNavTimes:f,defaultOpenKey:e.defaultOpenKey})),c.a.createElement(s.a.Provider,{value:{navData:h,setNavData:v,history:e.history,refreshNavTimes:f,setRefreshNavTimes:p}},c.a.createElement(u.a,{className:"left-right-layout"},t,c.a.createElement(u.a,null,c.a.createElement(u.a.Content,null,c.a.createElement(T,Object.assign({},e,{showLeftSider:l,setShowLeftSider:o}))))))},D=(a(54),a(10)),G=function e(t){var a=t.item,r=t.index,l=t.activeNavIDs,i=t.canWrite,u=Object(n.useState)(!1),d=Object(m.a)(u,2),p=d[0],E=d[1],h=Object(n.useState)(!1),b=Object(m.a)(h,2),v=b[0],O=b[1],j=Object(n.useContext)(s.a),y=j.history,N=j.setRefreshNavTimes,w=a.children.map((function(t,a){return c.a.createElement(e,{item:t,index:a,key:a,activeNavIDs:l,canWrite:i})})),k=Object(n.useCallback)((function(e){E((function(e){return!e}))}),[]);Object(n.useEffect)((function(){var e=l.indexOf(a.id)>=0;e!==v&&O(e)}),[l,v,a.id]);var S=Object(n.useCallback)((function(e){e.stopPropagation(),e.preventDefault();var t={parent:a.id,group:a.group};g.a.Post("/api/v1/docs/article/create",{},{data:t}).then((function(e){if(e.id>0){N((function(e){return e+1}));var t="/docs/article/".concat(e.id);y.push(t)}else console.log("\u521b\u5efa\u6587\u7ae0\u5931\u8d25")})).catch((function(e){console.log(e)}))}),[y,a,N]);return c.a.createElement("div",{key:r,className:"nav"},c.a.createElement("div",{className:"item"},c.a.createElement(o.c,{to:"/docs/article/".concat(a.id),activeClassName:"active"},c.a.createElement("div",{className:"title",style:{paddingLeft:12*a.level},onClick:k},w.length>0&&c.a.createElement(f.a,{type:p||v?"caret-down":"caret-right"}),a.title?a.title:c.a.createElement("span",{className:"no-title"},"\u65e0\u6807\u9898"),i&&c.a.createElement("div",{className:"add",onClick:S},c.a.createElement(f.a,{type:"plus-square-o"})))),w.length>0&&c.a.createElement("div",{className:p||v?"children active":"children"},w)))},K=function(e){var t=e.group,a=Object(n.useState)(null),r=Object(m.a)(a,2),l=r[0],o=r[1],i=Object(n.useContext)(s.a),u=i.navData,d=i.refreshNavTimes,f=i.currentArticleGroupID,p=i.groupPermissions,E=i.setGroupPermissions,h=Object(n.useState)([]),b=Object(m.a)(h,2),v=b[0],O=b[1],j=Object(n.useState)(0),y=Object(m.a)(j,2),N=y[0],w=y[1],k=Object(n.useState)(!1),S=Object(m.a)(k,2),C=S[0],x=S[1],I=Object(n.useCallback)((function(e,t){if(o(e),t&&w((function(e){return e++})),e){var a="/api/v1/docs/article/all?group=".concat(e);g.a.Get(a,{},{}).then((function(e){Array.isArray(e)?O(e):D.a.warn("\u83b7\u53d6\u6587\u7ae0\u5217\u8868\u6570\u636e\u51fa\u9519:"+JSON.stringify(e))})).catch((function(e){console.log(e)}))}}),[]),L=Object(n.useMemo)((function(){var e=[];return u.forEach((function(t){t.id&&t.id>0&&e.push(t.id)})),e}),[u]);Object(n.useEffect)((function(){t!==l?I(t):d>0&&N<=d&&I(t,!0)}),[l,t,I,N,d]);var P=Object(n.useCallback)((function(e){var t="/api/v1/docs/group/".concat(e,"/permissions");g.a.Get(t,{},{}).then((function(e){Array.isArray(e)&&E(e)})).catch((function(e){console.log(e)}))}),[E]);Object(n.useEffect)((function(){f>0&&P(f)}),[f,P]),Object(n.useEffect)((function(){p.indexOf("write")>=0?x(!0):x(!1)}),[p]);var A;return A=v.map((function(e,t){return c.a.createElement(G,{item:e,index:t,key:t,activeNavIDs:L,canWrite:C})})),c.a.createElement("div",{className:"articles"},A)},W=a(199);var z=function(e){var t=e.showLeftSider,a=e.setShowLeftSider,r=Object(n.useState)([]),l=Object(m.a)(r,2),i=l[0],p=l[1],E=Object(n.useState)({}),h=Object(m.a)(E,2),b=h[0],v=h[1],O=Object(n.useContext)(s.a),j=O.setRefreshNavTimes,y=O.history,N=O.currentArticleGroupID,k=O.setCurrentArticleGroupID,S=Object(n.useState)(!1),C=Object(m.a)(S,2),x=C[0],I=C[1],L=Object(n.useMemo)((function(){var e=localStorage.getItem("leftSiderWidth"),t=parseInt(e);return t&&t>=156&&t<=460?t:200}),[]),P=Object(n.useState)(L),A=Object(m.a)(P,2),M=A[0],T=A[1],R=Object(n.useCallback)((function(){g.a.Get("/api/v1/docs/group/all?level=1").then((function(e){Array.isArray(e)?(p(e),!N&&e.length>0&&document.location.href.indexOf("article")<0&&(v(e[0]),k(e[0].id))):D.a.warn("\u83b7\u53d6\u5206\u7ec4\u5217\u8868\u6570\u636e\u51fa\u9519",3)})).catch((function(e){console.log(e)}))}),[N,k]);Object(n.useEffect)((function(){return 0===i.length&&R(),function(){localStorage.setItem("leftSiderWidth",M)}}),[i.length,R,M]),Object(n.useEffect)((function(){if(N&&N!==b.id){var e="/api/v1/docs/group/".concat(N);g.a.Get(e).then((function(e){e.id>0&&(k(e.id),v(e))})).catch((function(e){console.log(e)}))}}),[N,b.id,k]);var G=Object(n.useCallback)((function(e,t){t.element;var a=t.size;a.width<156?T(156):a.width<=460?T(a.width):T(460)}),[T]),z=Object(n.useCallback)((function(e){e.preventDefault(),a((function(e){return localStorage.setItem("showLeftSider",!e),!e}))}),[a]),F=Object(n.useMemo)((function(){return t?c.a.createElement(K,{group:b.id}):null}),[b.id,t]),q=Object(n.useCallback)((function(e){if(e.stopPropagation(),b.id<0||!b.id)D.a.warn("\u8fd8\u672a\u9009\u62e9\u5206\u7c7b\uff0c\u4e0d\u53ef\u521b\u5efa\u6587\u7ae0",3);else{g.a.Post("/api/v1/docs/article/create",{},{data:{group:b.id}}).then((function(e){e.id>0?(D.a.success("\u6dfb\u52a0\u6587\u7ae0\u6210\u529f"),j((function(e){return e+1})),y.push("/docs/article/".concat(e.id))):D.a.warn(JSON.stringify(e))})).catch((function(e){console.log(e),403===e.status&&D.a.warn("\u60a8\u65e0\u6743\u9650\u6dfb\u52a0\u6587\u7ae0\uff01",5)}))}}),[b.id,y,j]),_=Object(n.useCallback)((function(e){e.id&&e.id>0&&(v(e),k(e.id)),I(!1)}),[k]),J=Object(n.useMemo)((function(){return c.a.createElement(W.b,{groups:i,handleGroupClick:_})}),[i,_]);return c.a.createElement(d.Resizable,{className:"box",axis:"x",height:0,width:M,onResize:G},c.a.createElement(u.a.Sider,{style:{height:"100vh"},width:M},c.a.createElement("div",{className:"left-sider"},c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"logo"},c.a.createElement(o.b,{to:"/"},c.a.createElement("img",{alt:"logo",src:"/static/image/logo-kanban.svg"})),c.a.createElement("div",{className:"toogle",onClick:z},c.a.createElement(f.a,{type:"angle-double-left",noMarginRight:!0})),c.a.createElement("div",{className:"clear"})),c.a.createElement("div",{className:"clear"}),c.a.createElement("div",{className:"namespace"},c.a.createElement(w.a,{overlay:J,trigger:["click"],visible:x},c.a.createElement("div",{onClick:function(){return I((function(e){return!e}))}},c.a.createElement("span",{style:{color:"red"}},c.a.createElement(f.a,{type:"flag"})),c.a.createElement("div",{className:"current"},b.name),c.a.createElement(f.a,{type:"arrows-v"}))))),c.a.createElement("div",{className:"content"},t&&F),c.a.createElement("div",{className:"footer",onClick:q},c.a.createElement("div",{className:"add"},c.a.createElement(f.a,{type:"plus"}),"\u65b0\u7684\u6587\u7ae0")))))},F=Object(v.a)((function(){return a.e(5).then(a.bind(null,1277))})),q=Object(v.a)((function(){return Promise.all([a.e(0),a.e(3),a.e(16),a.e(19)]).then(a.bind(null,1246))})),_=Object(v.a)((function(){return Promise.all([a.e(0),a.e(1),a.e(3),a.e(2),a.e(11)]).then(a.bind(null,1281))}));var J=function(e){var t=Object(n.useState)("align-justify"),a=Object(m.a)(t,2),r=a[0],l=a[1],o=Object(n.useContext)(s.a).navData,u=Object(n.useCallback)((function(t){t.preventDefault(),e.setShowLeftSider((function(e){return localStorage.setItem("showLeftSider",!e),!e}))}),[e]),d=Object(n.useMemo)((function(){return c.a.createElement(j,{data:o})}),[o]);return c.a.createElement("div",{className:"right-content"},c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"toogle",onClick:u,onMouseEnter:function(e){l("angle-double-right")},onMouseLeave:function(e){l("align-justify")},style:{display:e.showLeftSider?"none":"inline-block"}},c.a.createElement(f.a,{type:r})),d,c.a.createElement("div",{className:"right"},c.a.createElement(N,{history:e.history}),c.a.createElement("div",{className:"user"},c.a.createElement(S,null)))),c.a.createElement("div",{className:"container"},c.a.createElement(i.d,null,c.a.createElement(i.b,Object.assign({path:"/",exact:!0,component:q},e)),c.a.createElement(i.b,Object.assign({path:"/docs/article/:id",component:_},e)))),c.a.createElement(F,null))};var U=function(e){var t,a=Object(n.useState)(!1),r=Object(m.a)(a,2),l=r[0],o=r[1],i=Object(n.useState)(null),d=Object(m.a)(i,2),f=d[0],p=d[1],g=Object(n.useState)([]),E=Object(m.a)(g,2),h=E[0],b=E[1],v=Object(n.useState)(0),O=Object(m.a)(v,2),j=O[0],y=O[1],N=Object(n.useState)([{title:"\u9996\u9875",icon:"home",link:"/"}]),w=Object(m.a)(N,2),k=w[0],S=w[1];return Object(n.useEffect)((function(){var t=localStorage.getItem("showLeftSider");null!==t?(t!==l.toString()&&o("true"===t),"/"===e.location.pathname&&(document.title="\u770b\u677f-\u9996\u9875",k.length>1&&S([{title:"\u9996\u9875",icon:"home",link:"/"}]))):o(!0)}),[k.length,e.location.pathname,l]),l&&(t=c.a.createElement(z,{showLeftSider:l,setShowLeftSider:o,refreshNavTimes:j})),c.a.createElement(s.a.Provider,{value:{navData:k,setNavData:S,history:e.history,refreshNavTimes:j,setRefreshNavTimes:y,currentArticleGroupID:f,setCurrentArticleGroupID:p,groupPermissions:h,setGroupPermissions:b}},c.a.createElement(u.a,{className:"left-right-layout"},t,c.a.createElement(u.a,null,c.a.createElement(u.a.Content,null,c.a.createElement(J,Object.assign({},e,{showLeftSider:l,setShowLeftSider:o}))))))},V=(a(84),a(29)),B=(a(87),a(17)),H=(a(55),a(12)),$=(a(116),a(13)),Q=a(151),X=$.a.Item,Y=function(e){var t=Object(n.useMemo)((function(){return c.a.createRef()}),[]),a=Object(n.useCallback)((function(t){g.a.Post("/api/v1/account/login",{},{headers:{"Content-Type":"application/json",Accept:"application/json"},data:t}).then((function(t){if("success"===t.status||!0===t.status){var a=new Q.a(e.location.search).get("next","/");if((!a||"string"===typeof a&&a.indexOf("/user/login")>=0)&&(a="/"),"string"===typeof a&&a.startsWith("http"))window.location.href=a;else{var n=window.location.origin;"string"===typeof a&&(n=window.location.origin+a),window.location.href=n}}else D.a.error("\u767b\u9646\u5931\u8d25:"+t.message,5)})).catch((function(e){console.log(e),!e||400!==e.status&&403!==e.status||(e.data&&e.data.message?D.a.warn(e.data.message,5):D.a.err(JSON.stringify(e.data),5))}))}),[e.location.search]);return Object(n.useEffect)((function(){localStorage.reFreshPathname=null}),[]),c.a.createElement(u.a,{className:"container"},c.a.createElement(V.a,{className:"login"},c.a.createElement(B.a,{xs:{span:20,offset:2},lg:{span:6,offset:9}},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{src:"/static/image/logo-kanban.svg",alt:"Logo"})),c.a.createElement($.a,{ref:t,onFinish:a,name:"baseForm",className:"login-form"},c.a.createElement(X,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]},c.a.createElement(y.a,{prefix:c.a.createElement(f.a,{type:"user"}),placeholder:"username"})),c.a.createElement(X,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]},c.a.createElement(y.a,{prefix:c.a.createElement(f.a,{type:"lock"}),size:"large",type:"password",placeholder:"password"})),c.a.createElement(X,null,c.a.createElement(H.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{width:"100%"}},"\u767b\u5f55")),c.a.createElement(X,null,c.a.createElement(V.a,null,c.a.createElement(B.a,{span:12,className:"login-form-change"},c.a.createElement(o.b,{to:"/user/change/password"},"\u4fee\u6539\u5bc6\u7801")),c.a.createElement(B.a,{span:12,className:"login-form-forget"},c.a.createElement(o.b,{to:"/user/signup"},"\u6ce8\u518c"))))))))},Z=(a(122),a(71)),ee=function(e){var t=Object(n.useState)({}),a=Object(m.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)(!1),s=Object(m.a)(i,2),u=s[0],d=s[1],p=Object(n.useMemo)((function(){return c.a.createRef()}),[]),E=Object(n.useCallback)((function(e){console.log(e);g.a.Post("/api/v1/account/user/create",{},{headers:{"Content-Type":"application/json",Accept:"application/json"},data:e}).then((function(e){e.id>0?(l(e),d(!0)):D.a.warn(JSON.stringify(e),5)})).catch((function(e){console.log(e),400===e.status&&D.a.error(JSON.stringify(e.data),5)}))}),[]);return Object(n.useEffect)((function(){p.current.setFieldsValue({})}),[p]),u?c.a.createElement("div",{classname:"container"},c.a.createElement(Z.a,{status:"success",title:"\u8d26\u53f7\u6ce8\u518c\u6210\u529f!",subTitle:"\u60a8\u597d\uff01".concat(r.username,", \u8bf7\u70b9\u51fb\u767b\u5f55\uff01"),extra:[c.a.createElement(o.b,{to:"/"},c.a.createElement(H.a,{key:"index"},"\u9996\u9875")),c.a.createElement(o.b,{to:"/user/login"},c.a.createElement(H.a,{type:"primary",key:"login"},"\u767b\u5f55"))]})):c.a.createElement("div",{className:"container"},c.a.createElement(V.a,{className:"signup"},c.a.createElement(B.a,{xs:{span:20,offset:2},lg:{span:6,offset:9}},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{src:"/static/image/logo-kanban.svg",alt:"Logo"})),c.a.createElement($.a,{ref:p,onFinish:E,name:"baseForm",className:"login-form"},c.a.createElement($.a.Item,{name:"mobile",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]},c.a.createElement(y.a,{prefix:c.a.createElement(f.a,{type:"mobile"}),size:"large",type:"text",placeholder:"\u624b\u673a\u53f7"})),c.a.createElement($.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]},c.a.createElement(y.a,{prefix:c.a.createElement(f.a,{type:"user"}),placeholder:"username",allowClear:!0})),c.a.createElement($.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]},c.a.createElement(y.a,{prefix:c.a.createElement(f.a,{type:"lock"}),size:"large",type:"password",placeholder:"\u767b\u5f55\u5bc6\u7801",allowClear:!0})),c.a.createElement($.a.Item,{name:"re_password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]},c.a.createElement(y.a,{prefix:c.a.createElement(f.a,{type:"lock"}),size:"large",type:"password",placeholder:"\u91cd\u590d\u5bc6\u7801"})),c.a.createElement($.a.Item,null,c.a.createElement(H.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{width:"100%"}},"\u6ce8\u518c")),c.a.createElement($.a.Item,null,c.a.createElement(V.a,null,c.a.createElement(B.a,{span:12,className:"login-form-change"},c.a.createElement(o.b,{to:""},"\u4fee\u6539\u5bc6\u7801")),c.a.createElement(B.a,{span:12,className:"login-form-forget"},c.a.createElement(o.b,{to:"/user/login"},"\u767b\u5f55"))))))))},te=function(e){var t=Object(n.useState)({}),a=Object(m.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)(!1),s=Object(m.a)(i,2),u=s[0],d=s[1],p=Object(n.useMemo)((function(){return c.a.createRef()}),[]),E=Object(n.useCallback)((function(){g.a.Get("/api/v1/account/login",{},{}).then((function(t){console.log(t),t.logined?(l(t),p.current.setFieldsValue({username:t.username})):(D.a.info("\u5f53\u524d\u672a\u767b\u5f55\u7528\u6237"),e.history.push("/user/login?next=/user/change/password"))})).catch((function(e){console.log(e)}))}),[p,e.history]);Object(n.useEffect)((function(){E()}),[E]);var h=Object(n.useCallback)((function(e){g.a.Put("/api/v1/account/user/password/change",{},{headers:{"Content-Type":"application/json",Accept:"application/json"},data:e}).then((function(e){e.status?d(!0):e.message?D.a.warn(e.message):D.a.warn(JSON.stringify(e),5)})).catch((function(e){console.log(e),400===e.status&&(e.data&&e.data.message?D.a.warn(e.data.message):D.a.error(JSON.stringify(e.data),5))}))}),[]);return Object(n.useEffect)((function(){p.current.setFieldsValue({})}),[p]),u?c.a.createElement("div",{classname:"container"},c.a.createElement(Z.a,{status:"success",title:"\u5bc6\u7801\u4fee\u6539\u6210\u529f!",subTitle:"\u60a8\u597d\uff01".concat(r.username,", \u8bf7\u91cd\u65b0\u767b\u5f55\uff01"),extra:[c.a.createElement(o.b,{to:"/user/signup",key:"index"},c.a.createElement(H.a,{key:"index"},"\u6ce8\u518c")),c.a.createElement(o.b,{to:"/user/login",key:"login"},c.a.createElement(H.a,{type:"primary",key:"login"},"\u767b\u5f55"))]})):c.a.createElement("div",{className:"container"},c.a.createElement(V.a,{className:"signup"},c.a.createElement(B.a,{xs:{span:20,offset:2},lg:{span:6,offset:9}},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{src:"/static/image/logo-kanban.svg",alt:"Logo"})),c.a.createElement($.a,{ref:p,onFinish:h,name:"baseForm",className:"login-form"},c.a.createElement($.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]},c.a.createElement(y.a,{prefix:c.a.createElement(f.a,{type:"user"}),placeholder:"username",disabled:!0,allowClear:!0})),c.a.createElement($.a.Item,{name:"old_password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65e7\u7684\u5bc6\u7801"}]},c.a.createElement(y.a,{prefix:c.a.createElement(f.a,{type:"lock"}),size:"large",type:"password",placeholder:"\u65e7\u7684\u5bc6\u7801",allowClear:!0})),c.a.createElement($.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]},c.a.createElement(y.a,{prefix:c.a.createElement(f.a,{type:"lock"}),size:"large",type:"password",placeholder:"\u767b\u5f55\u5bc6\u7801",allowClear:!0})),c.a.createElement($.a.Item,{name:"re_password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]},c.a.createElement(y.a,{prefix:c.a.createElement(f.a,{type:"lock"}),size:"large",type:"password",placeholder:"\u91cd\u590d\u5bc6\u7801"})),c.a.createElement($.a.Item,null,c.a.createElement(H.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{width:"100%"}},"\u4fee\u6539\u5bc6\u7801")),c.a.createElement($.a.Item,null,c.a.createElement(V.a,null,c.a.createElement(B.a,{span:12,className:"login-form-change"},c.a.createElement(o.b,{to:"/"},"\u9996\u9875")),c.a.createElement(B.a,{span:12,className:"login-form-forget"},c.a.createElement(o.b,{to:"/user/login"},"\u767b\u5f55"))))))))};var ae=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),r=a[0],l=a[1];return Object(n.useEffect)((function(){var t,a=e.history.location.pathname;try{t=window.localStorage.reFreshPathname,window.localStorage.reFreshPathname=a}catch(n){t=a}a!==t?window.location.reload():l(!0)}),[e,r]),c.a.createElement("div",null,r?c.a.createElement(Z.a,{status:"404",title:"404",subTitle:"Sorry, \u60a8\u8981\u8bbf\u95ee\u7684\u9875\u9762\u4e0d\u5b58\u5728.",extra:c.a.createElement(o.b,{to:"/"},c.a.createElement(H.a,{type:"primary"},"\u8fd4\u56de\u9996\u9875"))}):null)};var ne=function(e){return c.a.createElement(s.b.Provider,null,c.a.createElement(o.a,null,c.a.createElement(i.d,null,c.a.createElement(i.b,{exact:!0,path:"/user/login",component:Y}),c.a.createElement(i.b,{exact:!0,path:"/user/signup",component:ee}),c.a.createElement(i.b,{exact:!0,path:"/user/change/password",component:te}),c.a.createElement(i.b,{exact:!0,path:"/",component:U}),c.a.createElement(i.b,{path:"/docs/article/list",render:function(e){return c.a.createElement(R,Object.assign({defaultOpenKey:"/docs"},e))}}),c.a.createElement(i.b,{path:"/docs/article",render:function(e){return c.a.createElement(U,Object.assign({defaultOpenKey:"/docs"},e))}}),c.a.createElement(i.b,{path:"/docs",render:function(e){return c.a.createElement(R,Object.assign({defaultOpenKey:"/docs"},e))}}),c.a.createElement(i.b,{path:"/tags",render:function(e){return c.a.createElement(R,Object.assign({defaultOpenKey:"/tags"},e))}}),c.a.createElement(i.b,{path:"/tools",render:function(e){return c.a.createElement(R,Object.assign({defaultOpenKey:"/tools"},e))}}),c.a.createElement(i.b,{path:"/user",render:function(e){return c.a.createElement(R,Object.assign({defaultOpenKey:"/user"},e))}}),c.a.createElement(i.b,{path:"/config",render:function(e){return c.a.createElement(R,Object.assign({defaultOpenKey:"/config"},e))}}),c.a.createElement(i.b,{path:"/test",render:function(e){return c.a.createElement(R,Object.assign({defaultOpenKey:"/test"},e))}}),c.a.createElement(i.b,{component:ae}))))},ce=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function re(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(408),a(409);l.a.render(c.a.createElement(ne,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ce?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):re(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):re(t,e)}))}}()}},[[241,7,9]]]);
//# sourceMappingURL=main.b950cab9.chunk.js.map